language: c
env:
  - export NODE_GYP_VER="0.12.5"
  - export NODE_GYP_DIR="~/.node-gyp"
  - export LIBMYSQL_INCLUDE_DIR="/usr/local/include/mysql"
  - export LIBMYSQL_LIBRARY="/usr/local/lib64/mysql"
  - export LD_LIBRARY_PATH="$LIBMYSQL_LIBRARY:$LD_LIBRARY_PATH"
os:
  - linux
compiler:
  - gcc
  addons:
    apt:
      packages:
      - cmake
      - libssh2-1-dev
      - openssh-client
      - openssh-server
      - mysql
matrix:
  fast_finish: true
notifications:
  email:
    - beehivecloud@gmail.com
branches:
  only:
    - master
before_install:
  - npm install nan@1.8.4
  - npm install -g node-gyp
before_script:
  - git submodule init
  - git submodule update
  - cd vendor/libgit2
  - git checkout v0.23.1
  - cd ../..
  - mkdir build
  - cd build
  - git clone https://github.com/JerryYangJin/hello.git
  - cd hello
  - node-gyp configure
  - cd ..
  - rm -rf hello
script:
  - cmake ..
  - cmake --build .
